{# Featured Article #}
{% set featured_article = fn('Timber::get_post', featured_article) %}

<section class="bg-gray-background pt-6 pb-16 lg:pt-9">
  <div class="fluid-grid gap-y-4.5">
    <div class="span-content">
      <h1 class="text-h5 text-blue-dark pb-4 border-b border-b-blue-dark lg:pb-2">{{ post.title }}</h1>
    </div>
    <div class="span-content space-y-4.5 lg:space-y-8 lg:col-start-[content-start] lg:col-end-[col-7] lg:self-center">
      <div class="flex gap-5">
        <span class="text-tag text-green-lime">Automation</span>
        <span class="text-tag">{{ featured_article.date }}</span>
      </div>
      <h2 class="text-h3 text-blue-dark">{{ featured_article.title }}</h2>
      <p class="hidden lg:block text-b1 text-blue-dark">{{ featured_article.article_preview }}</p>
      <div class="hidden lg:block">
        {% include "partials/link.twig" with {
          title: 'Read More',
          url: featured_article.link,
          class: 'button-primary',
        } %}
      </div>
    </div>
    <div class="span-content lg:col-start-[col-8] lg:col-end-[content-end] lg:self-center">
      {{ ResponsiveImage(featured_article.featured_image, {
        class: '',
        sizes: '',
      }) }}
    </div>
    <div class="span-content space-y-4.5 lg:hidden">
      <p class="text-b1 text-blue-dark">{{ featured_article.article_preview }}</p>
      <div class="">
        {% include "partials/link.twig" with {
          title: 'Read More',
          url: featured_article.link,
          class: 'button-primary',
        } %}
      </div>
    </div>
  </div>
</section>

{# Blog Filter #}
{% set posts = fn('Timber::get_posts', {
  post_type: 'blog',
	posts_per_page: -1,
}) %}

<section
  x-data='blogFilter({{ posts|escape("js")|json_encode }})'
  class="py-20"
>
  <header class="fluid-grid">
  {# filters #}
  </header>
  <div class="fluid-grid mt-12">
    <main
      x-auto-animate
      class="span-content grid grid-cols-subgrid gap-y-4"
    >
      <template x-for="post in displayedPosts">
        <div class="col-span-4">
          <a
            class="group"
            :href="post.link"
          >
            <div class="relative w-full rounded-md overflow-hidden transition-all group-hover:rounded-4xl">
              <img
                :src="post.featured_image.src"
                :alt="post.featured_image.alt"
                :srcset="post.featured_image.srcset"
                :width="post.featured_image.width"
                :height="post.featured_image.height"
                class="size-full object-contain"
                sizes=""
                loading="lazy"
              >
              <div class="absolute z-10 top-0 left-0 size-full gradient-adeptag bg-linear-to-r opacity-0 mix-blend-screen pointer-events-none group-hover:opacity-90"></div>
            </div>
            <div class="mt-4.5 space-y-3">
              <div class="flex flex-wrap gap-6">
                <span class="text-tag text-green-lime">Automation</span>
                <span
                  x-text="post.date"
                  class="text-tag text-neutral-500"
                ></span>
              </div>
              <h3
                x-text="post.title"
                class="text-b1 font-bold text-blue-dark"
              ></h3>
              <div
                x-text="post.article_preview"
                class="text-b2 text-blue-dark"
              ></div>
            </div>
          </a>
        </div>
      </template>
    </main>
    <div class="span-content">
      {% include "partials/pagination.twig" with { items: posts } %}
    </div>
  </div>
</section>
