<header
  x-data="{
    open: false,
    activeIndex: false,
    solution: false,
  }"
  class="
    relative z-50 lg:hidden
    {% if post.navigation_color == 'transparent' %}
      absolute! top-(--wp-admin--admin-bar--height,0px) left-0 bg-transparent w-full text-white
    {% endif %}
  "
>
  {# Bar #}
  <div
    class="
      fluid-grid h-16.5 py-4 border-b
      {% if post.navigation_color != 'transparent' %}
        border-b-blue-dark
      {% endif %}
    "
  >
    <div class="span-content flex justify-between">
      <a
        href="/"
        class="
          flex w-42 h-8.5
          {% if post.navigation_color != 'transparent' %}
            text-blue-dark
          {% endif %}
        "
      >
        {% include "svgs/adeptag.twig" %}
      </a>
      <div
        class="
          flex items-center gap-x-4
          {% if post.navigation_color != 'transparent' %}
            text-blue-dark
          {% endif %}
        "
      >
        {% if global.header.phone_number %}
          <a
            href="tel:{{ global.header.phone_number }}"
            class="flex size-6.25 p-[3%]"
          >
            {% include "svgs/phone.twig" %}
          </a>
        {% endif %}
        <button
          @click="open === 'search' ? open = false : open = 'search'"
          :aria-expanded="open == 'search'"
          class="
            relative flex size-6.25
            {% if post.navigation_color != 'transparent' %}
              text-blue-dark
            {% endif %}
          "
        >
          <div
            :class="open !== 'search' && 'opacity-100!'"
            class="absolute top-1/2 left-1/2 -translate-1/2 size-3/4 opacity-0 transition-opacity"
          >
            {% include "svgs/search.twig" %}
          </div>
          <div
            :class="open === 'search' && 'opacity-100!'"
            class="absolute top-1/2 left-1/2 -translate-1/2 size-full opacity-0 transition-opacity"
          >
            <div class="relative size-full">
              <div
                class="absolute top-1/2 left-1/2 -translate-1/2 rotate-45 w-3/4 h-0.75 rounded-full bg-current origin-center transition-transform"
              ></div>
              <div
                class="absolute top-1/2 left-1/2 -translate-1/2 -rotate-45 w-3/4 h-0.75 rounded-full bg-current origin-center transition-transform"
              ></div>
            </div>
          </div>
        </button>
        <button
          @click="open === 'hamburger' ? open = false : open = 'hamburger'"
          :aria-expanded="open == 'hamburger'"
          class="
            relative flex size-6.25
            {% if post.navigation_color != 'transparent' %}
              text-blue-dark
            {% endif %}
          "
        >
          <div
            :class="open == 'hamburger' && 'rotate-45 -translate-y-1/2!'"
            class="absolute top-1/2 left-1/2 -translate-x-1/2 translate-y-[calc(-0.25rem-50%)] w-3/4 h-0.75 rounded-full bg-current origin-center transition-transform"
          ></div>
          <div
            :class="open == 'hamburger' && '-rotate-45  -translate-y-1/2!'"
            class="absolute top-1/2 left-1/2 -translate-x-1/2 translate-y-[calc(0.25rem-50%)] w-3/4 h-0.75 rounded-full bg-current origin-center transition-transform"
          ></div>
        </button>
      </div>
    </div>
  </div>

  {# Nav Panel #}
  <div
    x-show="open === 'hamburger'"
    x-trap.noscroll="open === 'hamburger'"
    x-cloak
    {# x-collapse #}
    class="absolute z-30 top-16 left-0 flex flex-col justify-between w-full h-[calc(100dvh-4.125rem-var(--wp-admin--admin-bar--height,0px))] bg-white text-blue-dark"
  >
    <ul class="overflow-y-auto">
      {% for item in primary_menu.items %}
        <li class="">
          {% if item.children or item.panel_content.large_links %}
            <button
              @click="activeIndex = {{ loop.index }}"
              class="fluid-grid w-full"
            >
              <div class="span-content flex items-center justify-between py-5 border-b border-b-neutral-400">
                <span class="text-h5">{{ item.title }}</span>
                <div class="">
                  {% include "svgs/caret-right.twig" %}
                </div>
              </div>
            </button>
            {% include "components/header/header-mobile-submenu.twig" %}
          {% else %}
            <a
              href="{{ item.link }}"
              class="fluid-grid w-full"
            >
              <div class="span-content py-5 border-b border-b-neutral-400">
                <span class="text-h5">{{ item.title }}</span>
              </div>
            </a>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
    {% include "components/header/mobile-button-link.twig" %}
  </div>

  {# Search Panel #}
  {% include "components/header/header-mobile-search-panel.twig" %}
</header>
